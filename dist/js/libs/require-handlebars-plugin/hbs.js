/**
 * @license Handlebars hbs 2.0.0 - Alex Sexton, but Handlebars has its own licensing junk
 *
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/require-cs for details on the plugin this was based off of
 */

define(["hbs/handlebars","hbs/underscore","hbs/json2"],function(e,n,r){function t(n,r,t){var s,a;return t=t||{},"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0),s=e.parse(n),a=(new e.Compiler).compile(s,t),(new e.JavaScriptCompiler).compile(a,t)}var s,a,i=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=function(){throw new Error("Environment unsupported.")},l=[],u="w+",c="hbs",h="@hbs",p="/styles/",f="/demo-build/styles/",d="templates/helpers/",b="screen.build.css",m="onHbsRead";e.registerHelper("$",function(){}),"undefined"!=typeof window&&window.navigator&&window.document&&!window.navigator.userAgent.match(/Node.js/)?(a=function(){var e,n,r;if("undefined"!=typeof XMLHttpRequest)return arguments[0]===!0?new XDomainRequest:new XMLHttpRequest;for(n=0;3>n;n++){r=i[n];try{e=new ActiveXObject(r)}catch(t){}if(e){i=[r];break}}if(!e)throw new Error("getXhr(): XMLHttpRequest not available");return e},getIEVersion=function(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var n=navigator.userAgent,r=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=r.exec(n)&&(e=parseFloat(RegExp.$1))}return e},o=function(e,n){var r=!1;if(0!=e.indexOf("http"))r=!1;else{var t="https"===e.substr(0,5)?8:7,s="https"===window.location.href.substr(0,5)?8:7,i=e.substr(t).split("/").shift(),o=getIEVersion();r=i!=window.location.href.substr(s).split("/").shift()&&o>=7}if(r){var l=a(!0);l.open("GET",e),l.onload=function(){n(l.responseText,e)},l.onprogress=function(){},l.ontimeout=function(){},l.onerror=function(){},setTimeout(function(){l.send()},0)}else{var u=a();u.open("GET",e,!0),u.onreadystatechange=function(r){4===u.readyState&&n(u.responseText,e)},u.send(null)}}):"undefined"!=typeof process&&process.versions&&process.versions.node?(s=require.nodeRequire("fs"),o=function(e,n){var r=s.readFileSync(e,"utf8")||"";r=r.replace(/^\uFEFF/,""),n(r,e)}):"undefined"!=typeof java&&"undefined"!=typeof java.io&&(o=function(e,n){for(var r,t=new java.io.FileInputStream(e),s=new java.io.InputStreamReader(t,"UTF-8"),a=new java.io.BufferedReader(s),i="";null!==(r=a.readLine());)i+=new String(r)+"\n";a.close(),n(i,e)});var v,y=[],g={},E=[];return{get:function(){return e},write:function(e,n,r){if(n+h in l){var t=l[n+h];r.asModule(e+"!"+n,t)}},version:"3.0.3",load:function(s,a,i,w){function x(e,r){return n(e).forEach(function(e){e&&e.type&&"PartialStatement"===e.type&&"SubExpression"!==e.name.type&&r.push(e.name.original),e&&e.program&&e.program.body&&x(e.program.body,r),e&&e.inverse&&e.inverse.body&&x(e.inverse.body,r)}),r}function T(e,r){var t=[];return e&&e.body&&(t=x(e.body,[])),r&&r.partials&&r.partials.length&&n(r.partials).forEach(function(e){t.push(e)}),n.unique(t)}function M(e){var n,t,s;if(e&&e.body&&(n=e.body[0],n&&"CommentStatement"===n.type))try{return t=n.value.replace(new RegExp("^[\\s]+|[\\s]+$","g"),""),s=r.parse(t),t}catch(a){return r.stringify({description:t})}return"{}"}function S(e){return!!("SubExpression"===e.type||e.params&&e.params.length||e.hash)}function R(e,r){S(e)&&"undefined"!=typeof e.path&&_(e.path.original,r),e&&e.params&&e.params.forEach(function(e){R(e,r)}),e&&e.hash&&e.hash.pairs&&n(e.hash.pairs).forEach(function(e){R(e.value,r)})}function _(n,r){"undefined"==typeof e.helpers[n]&&r.push(n)}function j(e,r,t,s){t=t?t+".":"";var a="";return n(e).forEach(function(e){var n;(S(e)||"MustacheStatement"===e.type)&&R(e,s),e&&e.mustache&&j([e.mustache],r,t+a,s),e&&e.program&&e.program.body&&(n=j([e.path],[],"",s)[0]||"",e.inverse&&e.inverse.body&&j(e.inverse.body,r,t+a+(n?t+a?"."+n:n:""),s),j(e.program.body,r,t+a+(n?t+a?"."+n:n:""),s))}),r}function H(e){var r=[],t=[];e&&e.body&&(r=j(e.body,[],void 0,t));var s=["helperMissing","blockHelperMissing","each","if","unless","with","log","lookup"];return{vars:n(r).chain().unique().map(function(e){return""===e?".":e.length&&"."===e[e.length-1]?e.substr(0,e.length-1)+"[]":e}).value(),helpers:n(t).chain().unique().map(function(e){return n(s).contains(e)?void 0:e}).compact().value()}}function P(e){for(var n=e.split("/"),r=0;r<n.length;r++)".."===n[r]?(delete n[r-1],delete n[r]):"."===n[r]&&delete n[r];return n.join("/").replace(/\/\/+/g,"/")}function q(h){o(F,function(o,h){var w,x,S,R,_,j=v.isBuild&&v[m]?v[m]:function(e,n,r){return r},q=e.parse(j(s,h,o)),F=M(q),X=H(q),C=X.vars,D=X.helpers||[],A="",I="",N="",O=[],$=s.substr(0,s.lastIndexOf("/")+1);if("{}"!==F)try{S=r.parse(F)}catch(G){console.log("couldn't parse meta for %s",h)}var K=T(q,S);v.hbs=v.hbs||{},v.hbs._partials=v.hbs._partials||{};for(var V in K)if(K.hasOwnProperty(V)&&"string"==typeof K[V]){var J,z=K[V];if(J=P(z.match(/^(\.|\/)+/)?$+z:k+z),U){if(h===a.toUrl(J))continue}else if(h===a.toUrl(J+"."+(v.hbs&&v.hbs.templateExtension?v.hbs.templateExtension:c)))continue;v.hbs._partials[J]=v.hbs._partials[J]||[],v.hbs._partials[J].references=v.hbs._partials[J].references||[],v.hbs._partials[J].references.push(z),v.hbs._loadedDeps=v.hbs._loadedDeps||{},O[V]="hbs!"+J}if(w=O.join("', '"),D=D.concat(S&&S.helpers?S.helpers:[]),x=B?"":function(){var e,n=[],r=v.hbs&&v.hbs.helperPathCallback?v.hbs.helperPathCallback:function(e){return(v.hbs&&v.hbs.helperDirectory?v.hbs.helperDirectory:d)+e};for(e=0;e<D.length;e++)n[e]="'"+r(D[e],h)+"'";return n}().join(","),x&&(x=","+x),S)try{S.styles&&(y=n.union(y,S.styles),require.isBrowser&&!v.isBuild?(R=document.head||document.getElementsByTagName("head")[0],n(S.styles).forEach(function(e){g[e]||(_=document.createElement("link"),_.href=v.baseUrl+p+e+".css",_.media="all",_.rel="stylesheet",_.type="text/css",R.appendChild(_),g[e]=_)})):v.isBuild&&!function(){var e=require.nodeRequire("fs"),r=n(S.styles).map(function(e){return g[e]?"":(g[e]=!0,"@import url("+e+".css);\n")}).join("\n");e.open(__dirname+f+b,u,"0666",function(n,t){e.writeSync(t,r,null,encoding="utf8"),e.close(t)}),u="a"}())}catch(G){console.log("error injecting styles")}v.isBuild||v.serverRender||(A="<!-- START - "+s+" -->",I="<!-- END - "+s+" -->",N="t.meta = "+F+";\nt.helpers = "+r.stringify(D)+";\nt.deps = "+r.stringify(O)+";\nt.vars = "+r.stringify(C)+";\n");var Q=!1,W=v.hbs||{},Y=n.extend(W.compileOptions||{},{originalKeyFallback:W.originalKeyFallback}),Z=t(o,Q,Y),ee="'hbs!"+s+"',";w&&(w=", '"+w+"'");var ne=[];v.hbs._partials[s]&&(ne=v.hbs._partials[s].references);var re=v.hbs&&v.hbs.handlebarsPath?v.hbs.handlebarsPath:"hbs/handlebars";o="/* START_TEMPLATE */\ndefine("+ee+"['hbs','"+re+"'"+w+x+"], function( hbs, Handlebars ){ \nvar t = Handlebars.template("+Z+");\nHandlebars.registerPartial('"+s+"', t);\n";for(var V=0;V<ne.length;V++)o+="Handlebars.registerPartial('"+ne[V]+"', t);\n";o+=N+"return t;\n});\n/* END_TEMPLATE */\n",v.isBuild&&(l[L]=o),v.isBuild||(o+="\r\n//# sourceURL="+h),v.isBuild?(i.fromText(s,o),a([s],function(e){i(e)})):a(O,function(){i.fromText(o),a([s],function(e){i(e)})}),v.removeCombined&&h&&E.push(h)})}v=v||w;var L=s+h;v.hbs=v.hbs||{};var B=0==v.hbs.helpers,k="";v.hbs.partialsUrl&&(k=v.hbs.partialsUrl,k.match(/\/$/)||(k+="/")),v.hbs.fetchText&&(o=v.hbs.fetchText);var F,U=v.hbs&&v.hbs.templateExtension===!1;F=U?a.toUrl(s):a.toUrl(s+"."+(v.hbs&&v.hbs.templateExtension?v.hbs.templateExtension:c)),q(!1)},onLayerEnd:function(){v.removeCombined&&s&&E.forEach(function(e){s.existsSync(e)&&s.unlinkSync(e)})}}});